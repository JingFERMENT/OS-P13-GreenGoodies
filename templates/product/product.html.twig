{% extends 'base.html.twig' %}

{% block title %}
	{{product.name}}
	- GreenGoodies
{% endblock %}

{% block main %}
	<section class="product-details-block">
		<img src="{{ asset('img/'~product.picture) }}" alt="{{ product.name }}" class="product-details-image">
		<div class="product-details">
			<div class="product-texts">
				<h1>{{ product.name }}</h1>
				<p class="product-unit-price">{{ product.price|number_format(2, ',', ' ') }}
					€</p>
				<h3>Description</h3>
				<p class="long-description">{{ product.longDescription|nl2br }}</p>
				<form action="{{ path('app_add_to_cart', {id: product.id}) }}" method="post" class="quantity-form">
					{% if is_granted('IS_AUTHENTICATED_FULLY') %}
					<div class="quantity-block">
						<label for="quantity">Quantité :</label>
						<select name="quantity" id="quantity" class="quantity-dropdown" required>
							{% for i in quantityOptions %}
								<option value="{{ i }}"
								{% if cart[product.id] is defined and cart[product.id] == i %}selected{% endif %} 
								>{{ i }}</option>
							{% endfor %}
						</select>
					</div>
					<button type="submit" class="add-to-cart">
					{% if cart[product.id] is defined %}
						Mettre à jour le panier
					{% else %}
						Ajouter au panier
					{% endif %}
					</button>
					
					{% else %}
					<a class="add-to-cart" href ="{{ path('app_login') }}" >
					Connexion </a>
					{% endif %}
				</form>
			</div>
		</div>	
	</section>
{% endblock %}

